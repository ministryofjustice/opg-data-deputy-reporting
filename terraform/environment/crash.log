2020/04/22 12:15:10 [INFO] Terraform version: 0.12.23
2020/04/22 12:15:10 [INFO] Go runtime version: go1.12.13
2020/04/22 12:15:10 [INFO] CLI args: []string{"/usr/local/bin/terraform", "plan"}
2020/04/22 12:15:10 [DEBUG] Attempting to open CLI config file: /Users/loanuser/.terraformrc
2020/04/22 12:15:10 [DEBUG] File doesn't exist, but doesn't need to. Ignoring.
2020/04/22 12:15:10 [DEBUG] checking for credentials in "/Users/loanuser/.terraform.d/plugins"
2020/04/22 12:15:10 [DEBUG] checking for credentials in "/Users/loanuser/.terraform.d/plugins/darwin_amd64"
2020/04/22 12:15:10 [INFO] CLI command args: []string{"plan"}
2020/04/22 12:15:10 [TRACE] Meta.Backend: built configuration for "s3" backend with hash value 1050799066
2020/04/22 12:15:10 [TRACE] Preserving existing state lineage "06d01d6f-86b6-cce7-aa62-01c99a72ea18"
2020/04/22 12:15:10 [TRACE] Preserving existing state lineage "06d01d6f-86b6-cce7-aa62-01c99a72ea18"
2020/04/22 12:15:10 [TRACE] Meta.Backend: working directory was previously initialized for "s3" backend
2020/04/22 12:15:10 [TRACE] Meta.Backend: using already-initialized, unchanged "s3" backend configuration
2020/04/22 12:15:10 [INFO] Setting AWS metadata API timeout to 100ms
2020/04/22 12:15:10 [INFO] Ignoring AWS metadata API endpoint at default location as it doesn't return any instance-id
2020/04/22 12:15:10 [INFO] AWS Auth provider used: "EnvProvider"
2020/04/22 12:15:10 [INFO] Attempting to AssumeRole arn:aws:iam::311462405659:role/management-admin (SessionName: "", ExternalId: "", Policy: "")
2020/04/22 12:15:11 [DEBUG] Trying to get account information via sts:GetCallerIdentity
2020/04/22 12:15:11 [TRACE] Meta.Backend: instantiated backend of type *s3.Backend
2020/04/22 12:15:11 [DEBUG] checking for provider in "."
2020/04/22 12:15:11 [DEBUG] checking for provider in "/usr/local/bin"
2020/04/22 12:15:11 [DEBUG] checking for provider in ".terraform/plugins/darwin_amd64"
2020/04/22 12:15:11 [DEBUG] found provider "terraform-provider-archive_v1.3.0_x4"
2020/04/22 12:15:11 [DEBUG] found provider "terraform-provider-local_v1.4.0_x4"
2020/04/22 12:15:11 [DEBUG] found provider "terraform-provider-template_v2.1.2_x4"
2020/04/22 12:15:11 [DEBUG] checking for provider in "/Users/loanuser/.terraform.d/plugins"
2020/04/22 12:15:11 [DEBUG] checking for provider in "/Users/loanuser/.terraform.d/plugins/darwin_amd64"
2020/04/22 12:15:11 [WARN] found legacy provider "terraform-provider-aws"
2020/04/22 12:15:11 [WARN] found legacy provider "terraform-provider-circleci"
2020/04/22 12:15:11 [DEBUG] found valid plugin: "archive", "1.3.0", "/Users/loanuser/projects/opg-data-deputy-reporting/terraform/environment/.terraform/plugins/darwin_amd64/terraform-provider-archive_v1.3.0_x4"
2020/04/22 12:15:11 [DEBUG] found valid plugin: "local", "1.4.0", "/Users/loanuser/projects/opg-data-deputy-reporting/terraform/environment/.terraform/plugins/darwin_amd64/terraform-provider-local_v1.4.0_x4"
2020/04/22 12:15:11 [DEBUG] found valid plugin: "template", "2.1.2", "/Users/loanuser/projects/opg-data-deputy-reporting/terraform/environment/.terraform/plugins/darwin_amd64/terraform-provider-template_v2.1.2_x4"
2020/04/22 12:15:11 [DEBUG] found valid plugin: "aws", "0.0.0", "/Users/loanuser/.terraform.d/plugins/darwin_amd64/terraform-provider-aws"
2020/04/22 12:15:11 [DEBUG] found valid plugin: "circleci", "0.0.0", "/Users/loanuser/.terraform.d/plugins/darwin_amd64/terraform-provider-circleci"
2020/04/22 12:15:11 [DEBUG] checking for provisioner in "."
2020/04/22 12:15:11 [DEBUG] checking for provisioner in "/usr/local/bin"
2020/04/22 12:15:11 [DEBUG] checking for provisioner in ".terraform/plugins/darwin_amd64"
2020/04/22 12:15:11 [DEBUG] checking for provisioner in "/Users/loanuser/.terraform.d/plugins"
2020/04/22 12:15:11 [DEBUG] checking for provisioner in "/Users/loanuser/.terraform.d/plugins/darwin_amd64"
2020/04/22 12:15:11 [TRACE] Meta.Backend: backend *s3.Backend does not support operations, so wrapping it in a local backend
panic: runtime error: index out of range

goroutine 1 [running]:
github.com/hashicorp/hcl/v2/json.(*peeker).Read(...)
	/opt/teamcity-agent/work/9e329aa031982669/pkg/mod/github.com/hashicorp/hcl/v2@v2.3.0/json/peeker.go:20
github.com/hashicorp/hcl/v2/json.parseObject.func1(0x0, 0xc000222b41, 0x1, 0x60b, 0x2a91a0e, 0x15, 0x14, 0x1, 0x241, 0x14, ...)
	/opt/teamcity-agent/work/9e329aa031982669/pkg/mod/github.com/hashicorp/hcl/v2@v2.3.0/json/parser.go:127 +0xb0
github.com/hashicorp/hcl/v2/json.parseObject(0xc0001ee700, 0xc00043aba0, 0xc00017e5f0, 0x0, 0x0, 0x0)
	/opt/teamcity-agent/work/9e329aa031982669/pkg/mod/github.com/hashicorp/hcl/v2@v2.3.0/json/parser.go:233 +0xcb2
github.com/hashicorp/hcl/v2/json.parseValue(0xc0001ee700, 0xc00043ab40, 0x0, 0x0, 0x0, 0x0)
	/opt/teamcity-agent/work/9e329aa031982669/pkg/mod/github.com/hashicorp/hcl/v2@v2.3.0/json/parser.go:45 +0x70b
github.com/hashicorp/hcl/v2/json.parseObject(0xc0001ee700, 0xc00043a9c0, 0x2a91a0e, 0x15, 0x13, 0x1a)
	/opt/teamcity-agent/work/9e329aa031982669/pkg/mod/github.com/hashicorp/hcl/v2@v2.3.0/json/parser.go:188 +0x43c
github.com/hashicorp/hcl/v2/json.parseValue(0xc0001ee700, 0xc0001ee700, 0x60d, 0x2a91a0e, 0x15, 0x14)
	/opt/teamcity-agent/work/9e329aa031982669/pkg/mod/github.com/hashicorp/hcl/v2@v2.3.0/json/parser.go:45 +0x70b
github.com/hashicorp/hcl/v2/json.parseFileContent(0xc000222900, 0x64c, 0x84c, 0x2a91a0e, 0x15, 0x0, 0xc0005b05c0, 0x10bec52, 0xc00043a900, 0x27672e0)
	/opt/teamcity-agent/work/9e329aa031982669/pkg/mod/github.com/hashicorp/hcl/v2@v2.3.0/json/parser.go:21 +0x155
github.com/hashicorp/hcl/v2/json.Parse(0xc000222900, 0x64c, 0x84c, 0x2a91a0e, 0x15, 0x0, 0x0, 0x2030107, 0x0)
	/opt/teamcity-agent/work/9e329aa031982669/pkg/mod/github.com/hashicorp/hcl/v2@v2.3.0/json/public.go:21 +0x77
github.com/hashicorp/terraform/command.(*Meta).addVarsFromFile(0xc0001561a0, 0x2a91a0e, 0x15, 0xc000000046, 0xc000401dd0, 0x0, 0x1, 0x10088a9)
	/opt/teamcity-agent/work/9e329aa031982669/src/github.com/hashicorp/terraform/command/meta_vars.go:158 +0x5ee
github.com/hashicorp/terraform/command.(*Meta).collectVariableValues(0xc0001561a0, 0xc0000cc9b0, 0x0, 0x0, 0xc000858270)
	/opt/teamcity-agent/work/9e329aa031982669/src/github.com/hashicorp/terraform/command/meta_vars.go:70 +0xad4
github.com/hashicorp/terraform/command.(*PlanCommand).Run(0xc0001561a0, 0xc00000c070, 0x0, 0x0, 0xc000164630)
	/opt/teamcity-agent/work/9e329aa031982669/src/github.com/hashicorp/terraform/command/plan.go:111 +0xc8f
github.com/mitchellh/cli.(*CLI).Run(0xc000278500, 0xc000278500, 0xc000531d90, 0x1)
	/opt/teamcity-agent/work/9e329aa031982669/pkg/mod/github.com/mitchellh/cli@v1.0.0/cli.go:255 +0x1f1
main.wrappedMain(0x0)
	/opt/teamcity-agent/work/9e329aa031982669/src/github.com/hashicorp/terraform/main.go:239 +0xc33
main.realMain(0x0)
	/opt/teamcity-agent/work/9e329aa031982669/src/github.com/hashicorp/terraform/main.go:103 +0xb4
main.main()
	/opt/teamcity-agent/work/9e329aa031982669/src/github.com/hashicorp/terraform/main.go:39 +0x3b
